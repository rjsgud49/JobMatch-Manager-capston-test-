<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>NICEPAY 샌드박스 데모</title>
  <script src="https://pay.nicepay.co.kr/v1/js/"></script>
  <style>
    body { font-family: system-ui, sans-serif; padding:24px }
    label{ display:block; margin-top:12px }
    input{ padding:8px; width:260px }
    button{ padding:10px 16px; margin-top:16px }
  </style>
</head>
<body>
  <h2>나이스페이 결제창 테스트 (JS SDK)</h2>

  <label>금액</label>
  <input id="amt" type="number" value="55000">

  <label>주문명</label>
  <input id="goods" value="샌드박스 상품">

  <label>구매자명</label>
  <input id="buyer" value="홍길동">

  <button onclick="pay()">결제하기</button>

  <script>
    function pay() {
      if (!window.AUTHNICE) {
        alert('SDK 로딩 중입니다. 새로고침 후 다시 시도하세요.')
        return
      }
      const amount = Number(document.getElementById('amt').value || 1000)
      const goodsName = document.getElementById('goods').value || '테스트 상품'
      const buyerName = document.getElementById('buyer').value || '테스트'

      AUTHNICE.requestPay({
        clientId: 'S2_b93d3ee0b4264ccab621972dec981b74', // 테스트 Client Key
        method: 'card',
        orderId: Math.random().toString(16).slice(2),
        amount,
        goodsName,
        buyerName,
        // 인증 성공 후 서버로 리턴(서버에서 승인까지 처리)
        returnUrl: 'http://localhost:5174/pay/return',
        fnError: function (r) {
          alert('에러: ' + (r.errorMsg || r.msg || '알 수 없는 오류'))
        }
      })
    }
  </script>
</body>
</html>
